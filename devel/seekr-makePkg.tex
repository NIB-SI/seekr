% -*- TeX:Rnw:UTF-8 -*-
% ----------------------------------------------------------------
% .R knitr file  ************************************************
% ----------------------------------------------------------------
%%
% \VignetteEngine{knitr::knitr}
% \VignetteIndexEntry{}
% \VignetteDepends{}
% \VignettePackage{}

\documentclass[a4paper,12pt]{article}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\usepackage{Sweave}


%\usepackage[slovene]{babel}
\usepackage[utf8]{inputenc} %% must be here for Sweave encoding check
\input{abpkg}
\input{abcmd}
\input{abpage}
\usepackage{pgf,pgfarrows,pgfnodes,pgfautomata,pgfheaps,pgfshade}
\usepackage{amsmath,amssymb}
\usepackage{colortbl}

\input{mysweave}


\setkeys{Gin}{width=0.8\textwidth}  % set graphicx parameter
\usepackage{lmodern}
\input{abfont}

% ----------------------------------------------------------------
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}
%% Sweave settings for includegraphics default plot size (Sweave default is 0.8)
%% notice this must be after begin{document}
%%% \setkeys{Gin}{width=0.9\textwidth}
% ----------------------------------------------------------------
\title{Development of package \pkg{pisar}}
\author{A. Blejec}
%\address{}%
%\email{}%
%
%\thanks{}%
%\subjclass{}%
%\keywords{}%

%\date{}%
%\dedicatory{}%
%\commby{}%
\maketitle
% ----------------------------------------------------------------
%\begin{abstract}
%
%\end{abstract}
% ----------------------------------------------------------------
\tableofcontents



\clearpage
\section{Preparation}


Set package source directory

\begin{Schunk}
\begin{Sinput}
> purl <- TRUE
> (pkgPath <- gsub("/R/", "/R/!packages/", dirname(getwd())))
\end{Sinput}
\begin{Soutput}
[1] "D:/OMIKE/pisar"
\end{Soutput}
\begin{Sinput}
> (pkgPath <- gsub("/R/", "/R/!packages/", dirname(getwd())))
\end{Sinput}
\begin{Soutput}
[1] "D:/OMIKE/pisar"
\end{Soutput}
\begin{Sinput}
> (pkgName <- basename(dirname(getwd())))
\end{Sinput}
\begin{Soutput}
[1] "pisar"
\end{Soutput}
\begin{Sinput}
> dir(pkgPath)
\end{Sinput}
\begin{Soutput}
 [1] "_pkgdown.yml"  "DESCRIPTION"   "devel"         "doc"          
 [5] "docs"          "inst"          "man"           "Meta"         
 [9] "NAMESPACE"     "NAMESPACE.bak" "out"           "pisar.prj"    
[13] "pisar.prj.bak" "pisar.Rproj"   "R"             "README.md"    
[17] "vignettes"    
\end{Soutput}
\begin{Sinput}
> dir(file.path(pkgPath, "R"))
\end{Sinput}
\begin{Soutput}
[1] "pisar-api-concordance.tex"       
[2] "pisar-api.R"                     
[3] "pisar-initialize-concordance.tex"
[4] "pisar-initialize.R"              
[5] "pisar.pdf"                       
\end{Soutput}
\begin{Sinput}
> fctFile <- c("pisar-initialize.Rnw", "pisar-api.Rnw")
> (pkgFile <- gsub("\\.Rnw$", "\\.R", fctFile))
\end{Sinput}
\begin{Soutput}
[1] "pisar-initialize.R" "pisar-api.R"       
\end{Soutput}
\end{Schunk}

Files and directories:\\[12pt]
Original R source file(s): \url{pisar-initialize.Rnw, pisar-api.Rnw}\\
Package directory: \url{D:/OMIKE/pisar}\\
Package source file(s): \url{pisar-initialize.R, pisar-api.R}

%\section{Function definitions}
\clearpage
%<<child=fctFile,eval=!purl>>=
%@
\begin{Schunk}
\begin{Sinput}
> childtxt <- ""
\end{Sinput}
\end{Schunk}
\begin{Schunk}
\begin{Sinput}
> for (i in 1:length(fctFile)) {
+     childtxt <- paste(childtxt, knit_child(file.path("../devel", fctFile[i]), 
+         quiet = TRUE))
+ }
\end{Sinput}
\end{Schunk}

\clearpage
\section{Export as source for package}

perform steps for building a package. Extract code, make documentation files (\file{*.Rd}), build a package.

\subsection{Extract code}

Code is extracted to \url{pkgPath}.
%<<export to package,eval=purl>>=
%getwd()
%purl(file.path("../devel",fctFile),output=file.path(pkgPath,"R",pkgFile))
%@

\begin{Schunk}
\begin{Sinput}
> childtxt <- ""
> for (i in 1:length(fctFile)) {
+     cat(fctFile[i], "\n")
+     childtxt <- paste(childtxt, purl(file.path("../devel", fctFile[i]), 
+         output = file.path(pkgPath, "R", pkgFile[i])))
+ }
\end{Sinput}
\begin{Soutput}
pisar-initialize.Rnw 
\end{Soutput}
\begin{Soutput}


processing file: ../devel/pisar-initialize.Rnw
\end{Soutput}
\begin{Soutput}
  |                                                                         |                                                                 |   0%  |                                                                         |..                                                               |   3%  |                                                                         |....                                                             |   6%  |                                                                         |......                                                           |   9%  |                                                                         |........                                                         |  12%  |                                                                         |..........                                                       |  15%  |                                                                         |............                                                     |  18%  |                                                                         |..............                                                   |  21%  |                                                                         |................                                                 |  24%  |                                                                         |..................                                               |  27%  |                                                                         |....................                                             |  30%  |                                                                         |......................                                           |  33%  |                                                                         |........................                                         |  36%  |                                                                         |..........................                                       |  39%  |                                                                         |............................                                     |  42%  |                                                                         |..............................                                   |  45%  |                                                                         |................................                                 |  48%  |                                                                         |.................................                                |  52%  |                                                                         |...................................                              |  55%  |                                                                         |.....................................                            |  58%  |                                                                         |.......................................                          |  61%  |                                                                         |.........................................                        |  64%  |                                                                         |...........................................                      |  67%  |                                                                         |.............................................                    |  70%  |                                                                         |...............................................                  |  73%  |                                                                         |.................................................                |  76%  |                                                                         |...................................................              |  79%  |                                                                         |.....................................................            |  82%  |                                                                         |.......................................................          |  85%  |                                                                         |.........................................................        |  88%  |                                                                         |...........................................................      |  91%  |                                                                         |.............................................................    |  94%  |                                                                         |...............................................................  |  97%  |                                                                         |.................................................................| 100%
\end{Soutput}
\begin{Soutput}
output file: D:/OMIKE/pisar/R/pisar-initialize.R
\end{Soutput}
\begin{Soutput}
pisar-api.Rnw 
\end{Soutput}
\begin{Soutput}


processing file: ../devel/pisar-api.Rnw
\end{Soutput}
\begin{Soutput}
  |                                                                         |                                                                 |   0%  |                                                                         |................                                                 |  25%  |                                                                         |................................                                 |  50%  |                                                                         |.................................................                |  75%  |                                                                         |.................................................................| 100%
\end{Soutput}
\begin{Soutput}
output file: D:/OMIKE/pisar/R/pisar-api.R
\end{Soutput}
\begin{Sinput}
> dir(file.path(pkgPath, "R"))
\end{Sinput}
\begin{Soutput}
[1] "pisar-api-concordance.tex"       
[2] "pisar-api.R"                     
[3] "pisar-initialize-concordance.tex"
[4] "pisar-initialize.R"              
[5] "pisar.pdf"                       
\end{Soutput}
\end{Schunk}
 D:/OMIKE/pisar/R/pisar-initialize.R D:/OMIKE/pisar/R/pisar-api.R

\clearpage
\subsection{Documentation}
Probably not needed if we do the check?
\begin{Schunk}
\begin{Sinput}
> devtools::document(pkgPath)
\end{Sinput}
\begin{Soutput}
Updating pisar documentation
\end{Soutput}
\begin{Soutput}
Warning: @section [D:\OMIKE\pisar\R\pisar-initialize.R#18]: mismatched braces or quotes
\end{Soutput}
\begin{Soutput}
Writing NAMESPACE
\end{Soutput}
\begin{Soutput}
Loading pisar
\end{Soutput}
\begin{Soutput}
Writing NAMESPACE
\end{Soutput}
\begin{Sinput}
> usethis::use_package("knitr")
\end{Sinput}
\begin{Soutput}
<U+221A> Setting active project to 'D:/OMIKE/pisar'
\end{Soutput}
\begin{Soutput}
Warning in if (delta < 0) {: the condition has length > 1 and only the first element will be used
\end{Soutput}
\begin{Soutput}
Warning in if (delta > 0) {: the condition has length > 1 and only the first element will be used
\end{Soutput}
\begin{Soutput}
* Refer to functions with `knitr::fun()`
\end{Soutput}
\begin{Sinput}
> usethis::use_package("rio")
\end{Sinput}
\begin{Soutput}
* Refer to functions with `rio::fun()`
\end{Soutput}
\begin{Sinput}
> usethis::use_package("tools")
\end{Sinput}
\begin{Soutput}
* Refer to functions with `tools::fun()`
\end{Soutput}
\end{Schunk}
\clearpage
\subsection{Check}
\begin{Schunk}
\begin{Sinput}
> # system.time(check <- devtools::check(pkgPath))
> system.time(miss <- devtools::missing_s3(pkgPath))
\end{Sinput}
\begin{Soutput}
Loading pisar
\end{Soutput}
\begin{Soutput}
   user  system elapsed 
   0.50    0.17    0.87 
\end{Soutput}
\end{Schunk}
\clearpage
\subsection{Check results}
\begin{Schunk}
\begin{Sinput}
> check()
\end{Sinput}
\begin{Soutput}
Updating pisar documentation
\end{Soutput}
\begin{Soutput}
Warning: @section [D:\OMIKE\pisar\R\pisar-initialize.R#18]: mismatched braces or quotes
\end{Soutput}
\begin{Soutput}
Writing NAMESPACE
\end{Soutput}
\begin{Soutput}
Loading pisar
\end{Soutput}
\begin{Soutput}
Writing NAMESPACE
-- Building ------------------------------------------------- pisar --
Setting env vars:
* CFLAGS    : -Wall -pedantic
* CXXFLAGS  : -Wall -pedantic
* CXX11FLAGS: -Wall -pedantic
----------------------------------------------------------------------
         checking for file 'D:\OMIKE\pisar/DESCRIPTION' ...     checking for file 'D:\OMIKE\pisar/DESCRIPTION' ...   <U+221A>  checking for file 'D:\OMIKE\pisar/DESCRIPTION' (786ms)
      -  preparing 'pisar': (1.5s)
   checking DESCRIPTION meta-information ...     checking DESCRIPTION meta-information ...   <U+221A>  checking DESCRIPTION meta-information
      -  installing the package to build vignettes
         creating vignettes ...     creating vignettes ...   <U+221A>  creating vignettes (35.6s)
      -  excluding invalid files (1.4s)
   Subdirectory 'R' contains invalid file names:
     'pisar-api-concordance.tex' 'pisar-initialize-concordance.tex'
     'pisar.pdf'
      -  checking for LF line-endings in source and make files and shell scripts
      -  checking for empty or unneeded directories
  Removed empty directory      Removed empty directory 'pisar/devel/TeX-Aux/TeX-Aux/Bkp'
     Removed empty directory 'pisar/devel/TeX-Aux/TeX-Aux'
  Removed empty directory      Removed empty directory 'pisar/devel/figs'
  Removed empty directory      Removed empty directory 'pisar/inst/extdata/_p_Demo/_I_Test/_S_Show/_A_Work-R/output/Interactive'
  Removed empty directory      Removed empty directory 'pisar/out'
  Removed empty directory      Removed empty directory 'pisar/vignettes/TeX-Aux/Bkp'
  Removed empty directory      Removed empty directory 'pisar/vignettes/TeX-Aux/TeX-Aux/Bkp'
  Removed empty directory      Removed empty directory 'pisar/vignettes/TeX-Aux/TeX-Aux'
      -  building 'pisar_0.1.0.9000.tar.gz'
     
-- Checking ------------------------------------------------- pisar --
Setting env vars:
* _R_CHECK_CRAN_INCOMING_USE_ASPELL_: TRUE
* _R_CHECK_CRAN_INCOMING_REMOTE_    : FALSE
* _R_CHECK_CRAN_INCOMING_           : FALSE
* _R_CHECK_FORCE_SUGGESTS_          : FALSE
-- R CMD check -------------------------------------------------------
  Loading from R_PROFILE_USER [     Loading from R_PROFILE_USER [ C:\Users\ablejec\AppData\Local\Temp\RtmpmCSM3H\file6d241a883abf ]
   native.enc 
      -  using log directory 'C:/Users/ablejec/AppData/Local/Temp/RtmpmCSM3H/pisar.Rcheck'
-  using R version 3.5.3 (2019-03-11)
-  using platform: x86_64-w64-mingw32 (64-bit)
  -  using session charset: CP1250
      -  using options '--no-manual --as-cran' (351ms)
  <U+221A>  checking for file 'pisar/DESCRIPTION'
-  checking extension type ... Package
-  this is package 'pisar' version '0.1.0.9000'
-  package encoding: UTF-8
  <U+221A>  checking package namespace information
   checking package dependencies ...     checking package dependencies ...   <U+221A>  checking package dependencies (2.8s)
   checking if this is a source package ...     checking if this is a source package ...   <U+221A>  checking if this is a source package
<U+221A>  checking if there is a namespace
         checking for executable files ...     checking for executable files ...   <U+221A>  checking for executable files (772ms)
   checking for hidden files and directories ...     checking for hidden files and directories ...   <U+221A>  checking for hidden files and directories
   checking for portable file names ...     checking for portable file names ...   W  checking for portable file names
   Found the following file with a non-portable file name:
       devel/_Welcome · R packages.URL
     These are not fully portable file names.
   See section 'Package structure' in the 'Writing R Extensions' manual.
      <U+221A>  checking serialization versions
     checking whether package 'pisar' can be installed ...     checking whether package 'pisar' can be installed ...   <U+221A>  checking whether package 'pisar' can be installed (5.1s)
   checking installed package size ...     checking installed package size ...   <U+221A>  checking installed package size (740ms)
      <U+221A>  checking package directory (621ms)
  <U+221A>  checking 'build' directory
   checking DESCRIPTION meta-information ...     checking DESCRIPTION meta-information ...   N  checking DESCRIPTION meta-information (698ms)
   Package listed in more than one of Depends, Imports, Suggests, Enhances:
     'knitr'
   A package should be listed in only one of these fields.
  N  checking top-level files
   Non-standard file/directory found at top level:
     'devel'
   checking for left-over files ...     checking for left-over files ...   <U+221A>  checking for left-over files
   checking index information ...     checking index information ...   <U+221A>  checking index information (763ms)
         checking      checking package subdirectories     checking package subdirectories ...     checking package subdirectories ...   <U+221A>  checking package subdirectories (707ms)
   checking R files for non-ASCII characters ...     checking R files for non-ASCII characters ...   <U+221A>  checking R files for non-ASCII characters
   checking R files for syntax errors ...     checking R files for syntax errors ...   <U+221A>  checking R files for syntax errors
   checking whether the package can be loaded ...     checking whether the package can be loaded ...   <U+221A>  checking whether the package can be loaded
   checking whether the package can be loaded with stated dependencies ...     checking whether the package can be loaded with stated dependencies ...   <U+221A>  checking whether the package can be loaded with stated dependencies
   checking whether the package can be unloaded cleanly ...     checking whether the package can be unloaded cleanly ...   <U+221A>  checking whether the package can be unloaded cleanly
   checking whether the namespace can be loaded with stated dependencies ...     checking whether the namespace can be loaded with stated dependencies ...   <U+221A>  checking whether the namespace can be loaded with stated dependencies
   checking whether the namespace can be unloaded cleanly ...     checking whether the namespace can be unloaded cleanly ...   <U+221A>  checking whether the namespace can be unloaded cleanly (421ms)
   checking loading without being on the library search path ...     checking loading without being on the library search path ...   <U+221A>  checking loading without being on the library search path (563ms)
   checking dependencies in R code ...     checking dependencies in R code ...   <U+221A>  checking dependencies in R code (1.1s)
   checking S3 generic/method consistency ...     checking S3 generic/method consistency ...   <U+221A>  checking S3 generic/method consistency (1.1s)
   checking replacement functions ...     checking replacement functions ...   <U+221A>  checking replacement functions
   checking foreign function calls ...     checking foreign function calls ...   <U+221A>  checking foreign function calls
   checking R code for possible problems ...     checking R code for possible problems ...   N  checking R code for possible problems (4.7s)
   pisa: no visible binding for global variable '.proot'
   pisa: no visible binding for global variable '.iroot'
   pisa: no visible binding for global variable '.sroot'
   pisa: no visible binding for global variable '.aroot'
   pisa: no visible binding for global variable '.imeta'
   pisa: no visible binding for global variable '.ameta'
   pisa: no visible binding for global variable '.outfn'
   pisa: no visible binding for global variable '.reproot'
   pisa: no visible binding for global variable '.pname'
   pisa: no visible binding for global variable '.iname'
   pisa: no visible binding for global variable '.sname'
   pisa: no visible binding for global variable '.aname'
   pisa: no visible binding for global variable '.pmeta'
   pisa: no visible binding for global variable '.smeta'
   pisa: no visible binding for global variable '.inroot'
   pisa: no visible binding for global variable '.pfn'
   pisa: no visible binding for global variable '.ffn'
   pisa: no visible binding for global variable '.rnwfn'
   Undefined global functions or variables:
     .ameta .aname .aroot .ffn .imeta .iname .inroot .iroot .outfn .pfn
     .pmeta .pname .proot .reproot .rnwfn .smeta .sname .sroot
   checking Rd files ...     checking Rd files ...   <U+221A>  checking Rd files
   checking Rd metadata ...     checking Rd metadata ...   <U+221A>  checking Rd metadata
   checking Rd line widths ...     checking Rd line widths ...   <U+221A>  checking Rd line widths
   checking Rd cross-references ...     checking Rd cross-references ...   <U+221A>  checking Rd cross-references
   checking for missing documentation entries ...     checking for missing documentation entries ...   <U+221A>  checking for missing documentation entries
   checking for code/documentation mismatches ...     checking for code/documentation mismatches ...   <U+221A>  checking for code/documentation mismatches (966ms)
   checking Rd \usage sections ...     checking Rd \usage sections ...   <U+221A>  checking Rd \usage sections (1.4s)
   checking Rd contents ...     checking Rd contents ...   <U+221A>  checking Rd contents
   checking for unstated dependencies in examples ...     checking for unstated dependencies in examples ...   <U+221A>  checking for unstated dependencies in examples
         checking sizes of PDF files under 'inst/doc' ...     checking sizes of PDF files under 'inst/doc' ...   <U+221A>  checking sizes of PDF files under 'inst/doc' (1.6s)
   checking installed files from 'inst/doc' ...     checking installed files from 'inst/doc' ...   <U+221A>  checking installed files from 'inst/doc'
   checking files in 'vignettes' ...     checking files in 'vignettes' ...   <U+221A>  checking files in 'vignettes'
   checking examples ...     checking examples ...   <U+221A>  checking examples (1.7s)
         checking for unstated dependencies in vignettes ...     checking for unstated dependencies in vignettes ...   N  checking for unstated dependencies in vignettes (661ms)
   'library' or 'require' calls not declared from:
     'RCurl' 'httr' 'jsonlite'
   checking package vignettes in 'inst/doc' ...     checking package vignettes in 'inst/doc' ...   <U+221A>  checking package vignettes in 'inst/doc'
         checking re-building of vignette outputs ...     checking re-building of vignette outputs ...   W  checking re-building of vignette outputs (1.6s)
   Error in re-building vignettes:
     ...
   Quitting from lines 77-78 (FAIRdom-and-R.Rmd) 
   Error: processing vignette 'FAIRdom-and-R.Rmd' failed with diagnostics:
   there is no package called 'RCurl'
   Execution halted
   
     
   See
     'C:/Users/ablejec/AppData/Local/Temp/RtmpmCSM3H/pisar.Rcheck/00check.log'
   for details.
   
   
-- R CMD check results ------------------------- pisar 0.1.0.9000 ----
Duration: 34.2s

> checking for portable file names ... WARNING
  Found the following file with a non-portable file name:
    devel/_Welcome · R packages.URL
  These are not fully portable file names.
  See section 'Package structure' in the 'Writing R Extensions' manual.

> checking re-building of vignette outputs ... WARNING
  Error in re-building vignettes:
    ...
  Quitting from lines 77-78 (FAIRdom-and-R.Rmd) 
  Error: processing vignette 'FAIRdom-and-R.Rmd' failed with diagnostics:
  there is no package called 'RCurl'
  Execution halted

> checking DESCRIPTION meta-information ... NOTE
  Package listed in more than one of Depends, Imports, Suggests, Enhances:
    'knitr'
  A package should be listed in only one of these fields.

> checking top-level files ... NOTE
  Non-standard file/directory found at top level:
    'devel'

> checking R code for possible problems ... NOTE
  pisa: no visible binding for global variable '.proot'
  pisa: no visible binding for global variable '.iroot'
  pisa: no visible binding for global variable '.sroot'
  pisa: no visible binding for global variable '.aroot'
  pisa: no visible binding for global variable '.imeta'
  pisa: no visible binding for global variable '.ameta'
  pisa: no visible binding for global variable '.outfn'
  pisa: no visible binding for global variable '.reproot'
  pisa: no visible binding for global variable '.pname'
  pisa: no visible binding for global variable '.iname'
  pisa: no visible binding for global variable '.sname'
  pisa: no visible binding for global variable '.aname'
  pisa: no visible binding for global variable '.pmeta'
  pisa: no visible binding for global variable '.smeta'
  pisa: no visible binding for global variable '.inroot'
  pisa: no visible binding for global variable '.pfn'
  pisa: no visible binding for global variable '.ffn'
  pisa: no visible binding for global variable '.rnwfn'
  Undefined global functions or variables:
    .ameta .aname .aroot .ffn .imeta .iname .inroot .iroot .outfn .pfn
    .pmeta .pname .proot .reproot .rnwfn .smeta .sname .sroot

> checking for unstated dependencies in vignettes ... NOTE
  'library' or 'require' calls not declared from:
    'RCurl' 'httr' 'jsonlite'

0 errors <U+221A> | 2 warnings x | 4 notes x
\end{Soutput}
\begin{Soutput}
Error: R CMD check found WARNINGs
\end{Soutput}
\end{Schunk}
\clearpage
\subsection{Build a package}

Build the package

\begin{Schunk}
\begin{Sinput}
> devtools::build(pkgPath, manual = TRUE, quiet = FALSE)
\end{Sinput}
\begin{Soutput}
         checking for file 'D:\OMIKE\pisar/DESCRIPTION' ...  <U+221A>  checking for file 'D:\OMIKE\pisar/DESCRIPTION' (619ms)
      -  preparing 'pisar': (1.3s)
   checking      checking DESCRIPTION meta-information ...     checking DESCRIPTION meta-information ...   <U+221A>  checking DESCRIPTION meta-information
      -  installing the package to build vignettes
         creating vignettes ...     creating vignettes ...   <U+221A>  creating vignettes (33.4s)
      -  excluding invalid files (1.2s)
   Subdirectory 'R' contains invalid file names:
     'pisar-api-concordance.tex' 'pisar-initialize-concordance.tex'
     'pisar.pdf'
      -  checking for LF line-endings in source and make files and shell scripts
      -  checking for empty or unneeded directories
  Removed empty directory      Removed empty directory 'pisar/devel/TeX-Aux/TeX-Aux/Bkp'
     Removed empty directory 'pisar/devel/TeX-Aux/TeX-Aux'
  Removed empty directory      Removed empty directory 'pisar/devel/figs'
  Removed empty directory      Removed empty directory 'pisar/inst/extdata/_p_Demo/_I_Test/_S_Show/_A_Work-R/output/Interactive'
  Removed empty directory      Removed empty directory 'pisar/out'
  Removed empty directory      Removed empty directory 'pisar/vignettes/TeX-Aux/Bkp'
  Removed empty directory      Removed empty directory 'pisar/vignettes/TeX-Aux/TeX-Aux/Bkp'
     Removed empty directory 'pisar/vignettes/TeX-Aux/TeX-Aux'
      -  building 'pisar_0.1.0.9000.tar.gz'
     

\end{Soutput}
\begin{Soutput}
[1] "D:/OMIKE/pisar_0.1.0.9000.tar.gz"
\end{Soutput}
\begin{Sinput}
> devtools::load_all()
\end{Sinput}
\begin{Soutput}
Loading pisar
\end{Soutput}
\end{Schunk}



Install

\begin{Schunk}
\begin{Sinput}
> devtools::install(pkgPath)
\end{Sinput}
\begin{Soutput}
data.table (1.12.4 -> 1.12.6) [CRAN]
digest     (0.6.21 -> 0.6.22) [CRAN]
\end{Soutput}
\begin{Soutput}
Installing 2 packages: data.table, digest
\end{Soutput}
\begin{Soutput}
Installing packages into 'D:/RUSER/R/win-library/3.5'
(as 'lib' is unspecified)
\end{Soutput}
\begin{Soutput}

  There is a binary version available but the source version
  is later:
       binary source needs_compilation
digest 0.6.21 0.6.22              TRUE

package 'data.table' successfully unpacked and MD5 sums checked
\end{Soutput}
\begin{Soutput}
Error: (converted from warning) cannot remove prior installation of package 'data.table'
\end{Soutput}
\begin{Sinput}
> ## str(out)(shell(paste( file.path(R.home('bin'),'Rcmd.exe'), ' INSTALL
> ## --no-multiarch --with-keep.source', pkgPath) ,intern=FALSE))
\end{Sinput}
\end{Schunk}

Load
\begin{Schunk}
\begin{Sinput}
> devtools::load_all()
\end{Sinput}
\begin{Soutput}
Loading pisar
\end{Soutput}
\begin{Sinput}
> cat("Package:", pkgName, "\n")
\end{Sinput}
\begin{Soutput}
Package: pisar 
\end{Soutput}
\begin{Sinput}
> library(pkgName, character.only = TRUE)
> help(package = (pkgName))
\end{Sinput}
\end{Schunk}

\section{PDF documentation}

\begin{Schunk}
\begin{Sinput}
> (pkgName <- basename(dirname(getwd())))
\end{Sinput}
\begin{Soutput}
[1] "pisar"
\end{Soutput}
\begin{Sinput}
> (instPath <- find.package(pkgName))
\end{Sinput}
\begin{Soutput}
[1] "D:/OMIKE/pisar"
\end{Soutput}
\begin{Sinput}
> pdfFile <- file.path(getwd(), paste(pkgName, "pdf", sep = "."))
> if (file.exists(pdfFile)) file.remove(pdfFile)
\end{Sinput}
\begin{Soutput}
[1] TRUE
\end{Soutput}
\begin{Sinput}
> system(paste(shQuote(file.path(R.home("bin"), "R")), "CMD", "Rd2pdf", shQuote(instPath)))
> dir(pattern = pkgName)
\end{Sinput}
\begin{Soutput}
 [1] "pisar-api.Rnw"                  "pisar-functions.Rnw"           
 [3] "pisar-initialize.Rnw"           "pisar-initialize.synctex(busy)"
 [5] "pisar-initialize.tex"           "pisar-makePkg.pdf"             
 [7] "pisar-makePkg.Rnw"              "pisar-makePkg.synctex"         
 [9] "pisar-makePkg.tex"              "pisar.pdf"                     
\end{Soutput}
\end{Schunk}

\begin{Schunk}
\begin{Sinput}
> help(package = (pkgName), help_type = "pdf")
\end{Sinput}
\end{Schunk}

Send package to R Windows builder

\begin{Schunk}
\begin{Sinput}
> devtools::build_win(pkgPath)
\end{Sinput}
\end{Schunk}

%<<child='encChild2.Rnw'>>=
%@
% ----------------------------------------------------------------
%\bibliographystyle{chicago}
%\addcontentsline{toc}{section}{\refname}
%\bibliography{ab-general}
%--------------------------------------------------------------

%\clearpage
%\appendix
%\phantomsection\addcontentsline{toc}{section}{\appendixname}
%\section{\R\ funkcije}
%\input{}

\clearpage
\section*{SessionInfo}
{\small
Windows 10 x64 (build 17134) 
Warning in FUN(X[[i]], ...): DESCRIPTION file of package 'data.table' is missing or broken
Error in FUN(X[[i]], ...): subscript out of bounds
Project path:\verb' D:/OMIKE/pisar '\\
Main file :\verb' ../devel/pisar-makePkg.Rnw '


\subsection*{View as vignette}
Project files can be viewed by pasting this code to \R\ console:\\
\begin{Schunk}
\begin{Sinput}
> projectName <-"pisar";  mainFile <-"pisar-makePkg"

\end{Sinput}
\end{Schunk}
\begin{Schunk}
\begin{Sinput}
> commandArgs()
> library(tkWidgets)
> openPDF(file.path(dirname(getwd()),"doc",
> paste(mainFile,"PDF",sep=".")))
> viewVignette("viewVignette", projectName, #
> file.path("../devel",paste(mainFile,"Rnw",sep=".")))
> #
\end{Sinput}
\end{Schunk}

\vfill \hrule \vspace{3pt} \footnotesize{
%Revision \SVNId\hfill (c) A. Blejec%\input{../_COPYRIGHT.}
%\SVNRevision ~/~ \SVNDate
\noindent
\texttt{Git Revision: \gitCommitterUnixDate \gitAbbrevHash{} (\gitCommitterDate)} \hfill \copyright A. Blejec\\
\texttt{ \gitReferences} \hfill \verb'../devel/pisar-makePkg.Rnw'\\

}




\end{document}
% ----------------------------------------------------------------
